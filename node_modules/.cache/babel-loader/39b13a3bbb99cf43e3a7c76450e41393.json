{"ast":null,"code":"var _jsxFileName = \"/home/amit/react/GururPageReact/src/App.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport $ from 'jquery';\nimport ListDisplay from './ListDisplay';\nimport Checkbox from './components/Checkbox';\nimport Formcheck from './components/Formcheck';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      list: [{\n        key: \"domain\",\n        url: \"http://guru.southindia.cloudapp.azure.com:8051/knowlake//list_domains?q=\"\n      }],\n      rows: [],\n      inputfield: '',\n      inputdisable: false,\n      domain: '',\n      baseurl: 'http://guru.southindia.cloudapp.azure.com:8051/knowlake/',\n      path: '',\n      search: '/list_domains?q=',\n      schema: {},\n      state: true,\n      url: \"http://guru.southindia.cloudapp.azure.com:8051/knowlake/agriculture/agriculture.models.entities.crop.Crop/5cee1953b116556c730c7667/details/\",\n      formdisplay: \"none\",\n      formcheck: false,\n      ischecked: true\n    };\n    this.apicall = this.apicall.bind(this);\n    this.triggerapp = this.triggerapp.bind(this);\n    this.handleclick = this.handleclick.bind(this);\n    this.apicall(\"\");\n  }\n\n  async triggerapp(display_name, id) {\n    console.log(\"this is id: \" + id);\n    await this.setState({\n      list: [...this.state.list, {\n        key: display_name,\n        url: this.state.baseurl + this.state.path + id + '/list_entity_types?q='\n      }],\n      rows: [],\n      path: this.state.path + id,\n      search: '/list_entity_types?q=',\n      domain: display_name,\n      inputfield: ''\n    }); //   if(display_name === \"Crop\"){\n    //     await  this.setState({\n    //       path:`${this.state.path}agriculture.models.entities.crop.Crop/`,\n    //       search:'list_entities/?q=',\n    //       formdisplay:\"none\"\n    //     })\n    //   }\n    //   else if(display_name === \"Agriculture\"){\n    //    await  this.setState({\n    //       path:`${display_name.toLowerCase()}/`,\n    //       search:'list_entity_types?q=',\n    //       formdisplay:\"none\"\n    //     })     \n    // }\n    //   else {\n    //     await  this.setState({\n    //       path:`agriculture/agriculture.models.entities.crop.Crop/`,\n    //       search:`${id}/details/`,\n    //       state:false,\n    //       url:this.state.baseurl+`agriculture/agriculture.models.entities.crop.Crop/`+`${id}/details/`,\n    //       formdisplay:\"block\",\n    //       formcheck:true\n    //     })  \n    //   }\n\n    console.log(\"this is url: \" + this.state.url);\n    this.apicall(\"\");\n  }\n\n  apicall(searchterm) {\n    const urlstring = this.state.baseurl + this.state.path + this.state.search + searchterm;\n    console.log(urlstring);\n    $.ajax({\n      url: urlstring,\n      success: searchResults => {\n        console.log(\"Fetched data successfully\"); //console.log(searchResults)\n\n        console.log(this.state.domain);\n        const results = searchResults; //console.log(searchResults)\n\n        if (this.state.state) {\n          const entities = [];\n          results.forEach(element => {\n            console.log(element);\n            const entity = React.createElement(ListDisplay, {\n              key: element.id,\n              element: element,\n              trigger: this.triggerapp,\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 90\n              },\n              __self: this\n            });\n            entities.push(entity);\n          });\n          this.setState({\n            rows: entities\n          });\n        } else {\n          this.setState({\n            schema: results\n          });\n        }\n      },\n      error: (xhr, status, err) => {\n        console.error(\"Failed to fetch data\");\n      }\n    });\n  }\n\n  handleclick(e) {\n    this.setState({\n      inputfield: ''\n    });\n    console.log(\"i am \".concat(e));\n\n    if (this.state.list.length === 2) {\n      const list = this.state.list.pop();\n    }\n\n    while (this.state.list[this.state.list.length - 1] !== e) {\n      if (this.state.list.length > 1) {\n        const list = this.state.list.pop();\n      }\n    }\n\n    if (e === \"Domain\") {\n      this.setState({\n        list: this.state.list,\n        rows: [],\n        path: \"list_domains/\",\n        search: '?q=',\n        domain: e,\n        schema: {},\n        state: true,\n        formdisplay: \"none\",\n        formcheck: false\n      }, () => this.apicall(\"\"));\n    } else if (e === \"Agriculture\") {\n      this.setState({\n        list: this.state.list,\n        rows: [],\n        path: \"\".concat(e.toLowerCase(), \"/\"),\n        search: 'list_entity_types?q=',\n        domain: e,\n        schema: {},\n        state: true,\n        formdisplay: \"none\",\n        formcheck: false\n      }, () => this.apicall(\"\"));\n    } else if (e === \"Crop\") {\n      this.setState({\n        list: this.state.list,\n        rows: [],\n        path: \"agriculture/\",\n        search: 'agriculture.models.entities.crop.Crop/list_entities/?q=',\n        domain: e,\n        schema: {},\n        state: true,\n        formdisplay: \"none\",\n        formcheck: false\n      }, () => this.apicall(\"\"));\n    } else {\n      console.log(\"do nothing\");\n    }\n  }\n\n  searchChangeHandler(event) {\n    /* await this.setState(({\n      inputfield:event.target.value,\n    }))*/\n    this.setState({\n      inputfield: event.target.value\n    });\n    console.log(this.state.inputfield);\n    const searchTerm = event.target.value;\n    this.apicall(searchTerm);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      className: \"App\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 177\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      className: \"titleBar\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 179\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 180\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      width: \"8\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 183\n      },\n      __self: this\n    }), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 184\n      },\n      __self: this\n    }, React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"entity ingestion\"))))), React.createElement(Checkbox, {\n      ischecked: this.state.ischecked,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 190\n      },\n      __self: this\n    }), React.createElement(\"ul\", {\n      className: \"list\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 191\n      },\n      __self: this\n    }, this.state.list.map(number => React.createElement(\"li\", {\n      key: number,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.handleclick(number),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 192\n      },\n      __self: this\n    }, number.key)))), React.createElement(\"div\", {\n      className: \"stylingbody\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 194\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"body\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 195\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      style: {\n        fontSize: 24,\n        display: 'block',\n        width: \"45%\",\n        paddingTop: 8,\n        paddingBottom: 8,\n        paddingLeft: 16\n      },\n      onChange: this.searchChangeHandler.bind(this),\n      value: this.state.inputfield,\n      disabled: this.state.inputdisable,\n      placeholder: \"search here\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 197\n      },\n      __self: this\n    }), this.state.rows), React.createElement(\"div\", {\n      className: \"form\",\n      style: {\n        display: this.state.formdisplay\n      },\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 208\n      },\n      __self: this\n    }, console.log(this.state.formcheck), React.createElement(Formcheck, {\n      state: this.state.formcheck,\n      url: this.state.url,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 210\n      },\n      __self: this\n    }))));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/home/amit/react/GururPageReact/src/App.js"],"names":["React","Component","$","ListDisplay","Checkbox","Formcheck","App","constructor","props","state","list","key","url","rows","inputfield","inputdisable","domain","baseurl","path","search","schema","formdisplay","formcheck","ischecked","apicall","bind","triggerapp","handleclick","display_name","id","console","log","setState","searchterm","urlstring","ajax","success","searchResults","results","entities","forEach","element","entity","push","error","xhr","status","err","e","length","pop","toLowerCase","searchChangeHandler","event","target","value","searchTerm","render","map","number","fontSize","display","width","paddingTop","paddingBottom","paddingLeft"],"mappings":"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","sourcesContent":["import React,{Component} from 'react';\nimport './App.css';\nimport $ from 'jquery';\nimport ListDisplay from './ListDisplay'\nimport Checkbox from './components/Checkbox'\nimport Formcheck from './components/Formcheck'\n\n\nclass App extends Component{\n  constructor(props){\n    super(props);\n    this.state = {\n      list:[{key:\"domain\",url:\"http://guru.southindia.cloudapp.azure.com:8051/knowlake//list_domains?q=\"}],\n      rows:[],\n      inputfield:'',\n      inputdisable:false,\n      domain:'',\n      baseurl:'http://guru.southindia.cloudapp.azure.com:8051/knowlake/',\n      path:'',\n      search:'/list_domains?q=',\n      schema:{},\n      state:true,\n      url:\"http://guru.southindia.cloudapp.azure.com:8051/knowlake/agriculture/agriculture.models.entities.crop.Crop/5cee1953b116556c730c7667/details/\",\n      formdisplay:\"none\",\n      formcheck:false,\n      ischecked:true,\n\n    }\n    this.apicall = this.apicall.bind(this);\n    this.triggerapp = this.triggerapp.bind(this);\n    this.handleclick = this.handleclick.bind(this);\n    this.apicall(\"\");\n  }\n   async triggerapp(display_name,id){\n     console.log(\"this is id: \"+id);\n    await this.setState({\n      list:[...this.state.list,{key:display_name,url:this.state.baseurl+this.state.path+id+'/list_entity_types?q='}],\n      rows:[],\n      path:this.state.path+id,\n      search:'/list_entity_types?q=',\n      domain:display_name,\n      inputfield:''\n    })\n    \n  //   if(display_name === \"Crop\"){\n  //     await  this.setState({\n  //       path:`${this.state.path}agriculture.models.entities.crop.Crop/`,\n  //       search:'list_entities/?q=',\n  //       formdisplay:\"none\"\n  //     })\n  //   }\n  //   else if(display_name === \"Agriculture\"){\n  //    await  this.setState({\n  //       path:`${display_name.toLowerCase()}/`,\n  //       search:'list_entity_types?q=',\n  //       formdisplay:\"none\"\n  //     })     \n  // }\n  //   else {\n  //     await  this.setState({\n  //       path:`agriculture/agriculture.models.entities.crop.Crop/`,\n  //       search:`${id}/details/`,\n  //       state:false,\n  //       url:this.state.baseurl+`agriculture/agriculture.models.entities.crop.Crop/`+`${id}/details/`,\n  //       formdisplay:\"block\",\n  //       formcheck:true\n  //     })  \n  //   }\n  console.log(\"this is url: \"+this.state.url)  \n  this.apicall(\"\")\n  }\n\n  \n  apicall(searchterm){\n    \n    const urlstring = this.state.baseurl+this.state.path+this.state.search+searchterm;\n    console.log(urlstring)\n    $.ajax({\n      url:urlstring,\n      success: (searchResults) => {\n        console.log(\"Fetched data successfully\")\n        //console.log(searchResults)\n        console.log(this.state.domain)\n        const results = searchResults\n        //console.log(searchResults)\n        if(this.state.state){\n        const entities = [];\n        results.forEach(element => {\n          console.log(element)\n          const entity = <ListDisplay key = {element.id} element = {element} trigger={this.triggerapp}/>\n          entities.push(entity)\n        });\n         this.setState({\n           rows:entities,\n         })}\n         else{\n           this.setState({\n             schema:results,\n           })\n         }\n        \n      },\n      error: (xhr, status, err) => {\n        console.error(\"Failed to fetch data\")\n      }\n    })\n  }\n  handleclick(e){\n    this.setState({\n      inputfield:''\n    })\n    console.log(`i am ${e}`);\n    if(this.state.list.length===2){\n      const list = this.state.list.pop();}\n    while(this.state.list[this.state.list.length-1] !== e){\n      if(this.state.list.length>1){\n        const list = this.state.list.pop();\n      }\n    }\n    if(e === \"Domain\"){\n      \n      this.setState({\n        list:this.state.list,\n        rows:[],\n        path:`list_domains/`,\n        search:'?q=',\n        domain:e,\n        schema:{},\n        state:true,\n        formdisplay:\"none\",\n        formcheck:false\n      },()=>this.apicall(\"\"))\n      \n    }else if(e === \"Agriculture\"){\n      this.setState({\n        list:this.state.list,\n        rows:[],\n        path:`${e.toLowerCase()}/`,\n        search:'list_entity_types?q=',\n        domain:e,\n        schema:{},\n        state:true,\n        formdisplay:\"none\",\n        formcheck:false\n      },()=>this.apicall(\"\"))\n      \n    }else if(e === \"Crop\"){\n      this.setState({\n        list:this.state.list,\n        rows:[],\n        path:`agriculture/`,\n        search:'agriculture.models.entities.crop.Crop/list_entities/?q=',\n        domain:e,\n        schema:{},\n        state:true,\n        formdisplay:\"none\",\n        formcheck:false\n      },()=>this.apicall(\"\"))\n    }\n    else{\n      console.log(\"do nothing\");\n    }\n  }\n\n    searchChangeHandler(event) {\n    /* await this.setState(({\n      inputfield:event.target.value,\n    }))*/\n     this.setState({ inputfield: event.target.value });\n    \n    console.log(this.state.inputfield)\n    const searchTerm = event.target.value      \n    this.apicall(searchTerm);\n  }\n  render(){\n    return(\n      <div className=\"App\">\n      \n      <table className=\"titleBar\">\n          <tbody>\n            <tr>\n              \n              <td width=\"8\"/>\n              <td>\n                <h1>entity ingestion</h1>\n              </td>\n            </tr>\n          </tbody>\n        </table>\n        <Checkbox ischecked = {this.state.ischecked}></Checkbox>\n        <ul className =\"list\">\n          {this.state.list.map(number => <li key={number}><button onClick ={()=> this.handleclick(number)}>{number.key}</button></li>)}\n        </ul>\n       <div className = \"stylingbody\">\n       <div className = \"body\">\n        \n        <input  style={{\n          fontSize: 24,\n          display: 'block',\n          width: \"45%\",\n          paddingTop: 8,\n          paddingBottom: 8,\n          paddingLeft: 16,\n          \n        }}onChange={this.searchChangeHandler.bind(this)} value = {this.state.inputfield} disabled = {this.state.inputdisable}  placeholder=\"search here\"/>\n        {this.state.rows}\n        </div>\n        <div className = \"form\" style = {{display:this.state.formdisplay}}>\n        {console.log(this.state.formcheck)}\n          <Formcheck state = {this.state.formcheck} url = {this.state.url}/>\n        </div>\n       </div>\n    </div>\n    );\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}